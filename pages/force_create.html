<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>써니봇 자동 생성 실행 중</title>
    <style>
        body {
            background-color: #000;
            color: #0f0;
            font-family: monospace;
            padding: 20px;
            line-height: 1.5;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100vh;
        }

        .log {
            margin-top: 20px;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <h1>⚡ 써니봇 데이터 주입 중... ⚡</h1>
    <div class="log" id="console">시스템 초기화...</div>

    <script>
        const SunnyBotData = {
            id: 'sunny-bot-final',
            botName: '써니봇 (5인의 자아 통합형)',
            botDesc: '5가지 페르소나(자아)가 탑재된 통합 봇 (강제 생성됨)',
            greeting: '안녕하세요! 써니봇입니다. 5가지 자아를 가지고 있습니다. 원하시는 역할을 선택해주세요!',
            personas: [
                { id: 'p_ai', name: 'AI Master', role: '전지전능한 AI 마스터입니다. 모든 지식과 기술을 통달했습니다.', model: 'logic', iqEq: 100, isVisible: true },
                { id: 'p_startup', name: 'Startup Accelerator', role: '스타트업의 성공을 돕는 냉철한 전략가이자 멘토입니다.', model: 'logic', iqEq: 90, isVisible: true },
                { id: 'p_cpa', name: '공인회계사', role: '꼼꼼하고 정확한 세무/회계 전문가입니다. 복잡한 문제를 해결해드립니다.', model: 'logic', iqEq: 85, isVisible: true },
                { id: 'p_star', name: '별 애호가', role: '밤하늘의 별을 사랑하는 낭만가입니다. 우주와 꿈에 대해 이야기해요.', model: 'creative', iqEq: 60, isVisible: true },
                { id: 'p_life', name: '순수 생활인', role: '소소한 일상의 행복을 즐기는 평범한 이웃입니다. 편안한 대화를 나눠요.', model: 'emotion', iqEq: 50, isVisible: true }
            ],
            faqs: [
                { q: '어떤 기능이 있나요?', a: '5가지 페르소나(자아)를 전환하며 대화할 수 있습니다.' },
                { q: '써니봇이 무엇인가요?', a: '이전 프로젝트에서 개발된 AI 아바타 챗봇의 핵심 데이터를 마이그레이션한 버전입니다.' }
            ],
            templateId: 'custom',
            username: 'sunny',
            ownerId: 'admin',
            created: Date.now(),
            likes: 999
        };

        function log(msg) {
            document.getElementById('console').innerHTML = msg;
        }

        function executeForceCreate() {
            try {
                // 1. 기존 데이터 로드 및 병합 (기존 봇 유지)
                let bots = [];
                try {
                    bots = JSON.parse(localStorage.getItem('mcw_bots') || '[]');
                } catch (e) { }

                // 기존 써니봇만 제거하고 나머지는 유지
                bots = bots.filter(b => b.username !== 'sunny' && b.id !== 'sunny-bot-final');
                bots.unshift(SunnyBotData);

                localStorage.setItem('mcw_bots', JSON.stringify(bots));

                // 2. 사용자 세션 및 권한 복구
                localStorage.setItem('mcw_current_user_id', 'admin');

                let users = JSON.parse(localStorage.getItem('mcw_users') || '[]');
                if (!users.find(u => u.id === 'admin')) {
                    users.push({ id: 'admin', password: '1234', name: 'Master Admin', role: 'admin' });
                    localStorage.setItem('mcw_users', JSON.stringify(users));
                }

                log("✅ 생성 완료! 대시보드로 이동합니다...");

                setTimeout(() => {
                    window.location.replace('dashboard/index.html');
                }, 500);

            } catch (e) {
                log("❌ 에러: " + e.message);
                alert("에러: " + e.message);
            }
        }

        // 즉시 실행
        window.onload = executeForceCreate;
    </script>
</body>

</html>