<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>챗봇 만들기 - My Chatbot World</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/create.css">
</head>

<body class="dark-body">
    <nav class="navbar scrolled">
        <div class="container navbar-inner">
            <a href="/" class="navbar-logo">🤖 <span>My Chatbot World</span></a>
            <div class="navbar-cta">
                <a href="/dashboard" class="btn btn-secondary btn-sm">대시보드</a>
            </div>
        </div>
    </nav>

    <main class="create-main">
        <div class="container-sm">
            <!-- Progress Bar -->
            <div class="create-progress">
                <div class="progress-steps">
                    <div class="progress-step active" data-step="1"><span>1</span>분야 선택</div>
                    <div class="progress-step" data-step="2"><span>2</span>정보 입력</div>
                    <div class="progress-step" data-step="3"><span>3</span>음성/텍스트</div>
                    <div class="progress-step" data-step="4"><span>4</span>AI 분석</div>
                    <div class="progress-step" data-step="5"><span>5</span>완성!</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Step 1: Template Selection -->
            <div class="create-step" id="step1">
                <h2 class="step-title">어떤 분야의 챗봇을 만드시겠어요?</h2>
                <p class="step-desc">분야에 맞는 맞춤 템플릿으로 시작하세요</p>
                <div class="template-select-grid" id="templateSelectGrid"></div>
            </div>

            <!-- Step 2: Basic Info -->
            <div class="create-step hidden" id="step2">
                <h2 class="step-title">기본 정보를 알려주세요</h2>
                <p class="step-desc">챗봇의 이름과 설명을 입력해주세요</p>
                <div class="form-card">
                    <div class="form-group">
                        <label class="form-label" style="color:white">챗봇 이름 *</label>
                        <input type="text" class="form-input" id="botName" placeholder="예: 김의원 AI 비서, 쿡식당 도우미"
                            maxlength="30">
                    </div>
                    <div class="form-group">
                        <label class="form-label" style="color:white">한줄 설명</label>
                        <input type="text" class="form-input" id="botDesc" placeholder="예: 유권자들과 소통하는 AI 비서입니다"
                            maxlength="100">
                    </div>
                    <div class="form-group">
                        <label class="form-label" style="color:white">사용자명 (URL용)</label>
                        <div class="input-with-prefix">
                            <span class="input-prefix">mychatbot.world/bot/</span>
                            <input type="text" class="form-input" id="botUsername" placeholder="my-bot" maxlength="20"
                                pattern="[a-z0-9-]+">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg" style="width:100%" onclick="goToStep(3)">다음: 음성/텍스트 입력
                        →</button>
                </div>
            </div>

            <!-- Step 3: Voice/Text Input -->
            <div class="create-step hidden" id="step3">
                <h2 class="step-title">AI에게 당신을 소개해주세요</h2>
                <p class="step-desc">3분간 자유롭게 말하거나 텍스트로 입력해주세요</p>

                <div class="input-mode-tabs">
                    <button class="tab-btn active" onclick="switchInputMode('voice')">🎤 음성 입력</button>
                    <button class="tab-btn" onclick="switchInputMode('text')">⌨️ 텍스트 입력</button>
                </div>

                <!-- Voice Input -->
                <div class="voice-input-area" id="voiceInput">
                    <div class="voice-circle" id="voiceCircle" onclick="toggleRecording()">
                        <div class="voice-icon" id="voiceIcon">🎤</div>
                        <div class="voice-waves" id="voiceWaves"></div>
                    </div>
                    <div class="voice-timer" id="voiceTimer">3:00</div>
                    <p class="voice-hint" id="voiceHint">마이크를 탭하여 녹음을 시작하세요</p>
                    <div class="voice-guide">
                        <h4>💡 이런 내용을 말해주세요:</h4>
                        <ul id="voiceGuideList"></ul>
                    </div>
                </div>

                <!-- Text Input -->
                <div class="text-input-area hidden" id="textInput">
                    <textarea class="form-input form-textarea" id="textContent" rows="10"
                        placeholder="자기소개, 주요 업무, 자주 받는 질문과 답변을 자유롭게 작성해주세요..."></textarea>
                    <p class="char-count"><span id="charCount">0</span>/2000</p>
                </div>

                <div class="voice-transcript hidden" id="transcriptArea">
                    <h4>📝 녹음 내용:</h4>
                    <p id="transcriptText"></p>
                </div>

                <button class="btn btn-primary btn-lg" style="width:100%; margin-top:1.5rem" onclick="analyzeInput()">
                    🤖 AI 분석 시작 →
                </button>
            </div>

            <!-- Step 4: AI Analysis -->
            <div class="create-step hidden" id="step4">
                <h2 class="step-title">AI가 분석 중입니다...</h2>
                <div class="analysis-animation" id="analysisAnimation">
                    <div class="analysis-spinner">
                        <div class="spinner spinner-primary" style="width:48px;height:48px;border-width:4px"></div>
                    </div>
                    <div class="analysis-steps" id="analysisSteps">
                        <div class="analysis-step">🔍 음성/텍스트 분석 중...</div>
                        <div class="analysis-step">🧠 성격과 어조 추출 중...</div>
                        <div class="analysis-step">💬 인사말 생성 중...</div>
                        <div class="analysis-step">❓ FAQ 자동 생성 중...</div>
                    </div>
                </div>
                <div class="analysis-result hidden" id="analysisResult">
                    <h2 class="step-title">✨ 챗봇이 생성되었습니다!</h2>
                    <div class="result-preview" id="resultPreview"></div>
                    <button class="btn btn-primary btn-xl" style="width:100%; margin-top:1.5rem"
                        onclick="completeCreation()">
                        🚀 챗봇 배포하기
                    </button>
                </div>
            </div>

            <!-- Step 5: Complete! -->
            <div class="create-step hidden" id="step5">
                <div class="complete-celebration">
                    <div class="complete-icon">🎉</div>
                    <h2 class="step-title">축하합니다! 챗봇이 배포되었습니다!</h2>
                    <div class="complete-info">
                        <div class="complete-url">
                            <label>챗봇 URL:</label>
                            <div class="url-copy-box">
                                <input type="text" id="botUrl" readonly>
                                <button class="btn btn-sm btn-primary" onclick="copyUrl()">복사</button>
                            </div>
                        </div>
                        <div class="complete-qr" id="qrCode"></div>
                    </div>
                    <div class="complete-actions">
                        <a href="#" id="chatLink" class="btn btn-primary btn-lg">💬 챗봇과 대화하기</a>
                        <a href="/dashboard" class="btn btn-secondary btn-lg">📊 대시보드 가기</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/app.js"></script>
    <script src="js/create.js"></script>
</body>

</html>